---
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogPost from '../../components/BlogPost.astro'

const pageTitle = "Blog";

const allPosts = await Astro.glob('./**/*.md*');
const allTags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())];
---

<BaseLayout title={pageTitle}>
    <h2>{pageTitle}</h2>

    <section class="posts">
    <ul>
        {allPosts.map((post) => <BlogPost url={post.url} title={post.frontmatter.title} description={post.frontmatter.description} pubDate={post.frontmatter.pubDate} tags={post.frontmatter.tags}/> )}
    </ul>
    </section>
    <h2>Tags</h2>
    <section class="tags">
    {allTags.map((tag) => <a href={`/tags/${tag}`} class="tag">{tag}</a>)}
    </section>
</BaseLayout>

<style>

section {
    margin: 2rem 1rem;
}

.tags {
    display: flex;
    margin: 0 auto;
    flex-wrap: wrap;
}

.tag {
    margin: 0.25em;
    border:groove 1px #a1a1a1;
    border-radius: .5em;
    color: #00539F;
    padding: .5em 1em;
    font-size: 1.15em;
    background-color: #F8FCFD;
}

</style>
