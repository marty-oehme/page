---
import { type CollectionEntry, getCollection } from "astro:content";
type BlogEntry = CollectionEntry<"blog">;

import BlogPostLayout from "../../layouts/BlogPostLayout.astro";
import Aside from "../../components/Aside.astro";

export async function getStaticPaths() {
  const blogEntries = await getCollection("blog");
  return blogEntries.map((entry: BlogEntry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<style is:global>
      .line {
        display: inline;
        padding-bottom: 0;
      }
      .diff {
        display: inline-block;
        width: 100vw;
        margin: 0 -12px;
        padding: 0 12px;
      }
      .diff.add {
        background-color: #0505;
      }
      .diff.remove {
        background-color: #8005;
      }
      .diff:before {
        position: absolute;
        left: 40px;
      }
      .has-focused .line {
        filter: blur(0.095rem);
      }
      .has-focused .focused {
        filter: blur(0);
      }
</style>

<BlogPostLayout post={entry}>
  <Content components={{ Aside: Aside }} />
</BlogPostLayout>
